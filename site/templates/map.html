{% extends 'base.html' %}
{% block title%}Map{% endblock%}
{% block content%}



<style>

    #map {
        height: 70%; 
        width: 100%; 
    }
</style>

<div class='mapper'>
    <div id="map"></div> 
  </div>
  
  <script type="text/javascript"> 

    var directionsService = new google.maps.DirectionsService();
    var directionsDisplay = new google.maps.DirectionsRenderer();


    var map = new google.maps.Map(document.getElementById('map'), {
      zoom:7,
      center: new google.maps.LatLng({{values[0]}}, {{values[1]}}),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
   
    directionsDisplay.setMap(map);


    var request = {
      origin: new google.maps.LatLng({{values[0]}}, {{values[1]}}), 
      destination: new google.maps.LatLng( {{values[0]}}, {{values[1]}}),
      waypoints: [
      {location: '{{values[2]}}'},
      {location: '{{values[3]}}'},
      {location: '{{values[4]}}'},
      {location: '{{values[5]}}'},
      {location: '{{values[6]}}'}
      ],
      optimizeWaypoints: true,
      travelMode: google.maps.DirectionsTravelMode.DRIVING
    };

    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  </script> 
  <div class="map_all">
    <div class="map_div">
      <form action='/route' method="POST"> 
        <input class="map_button" type="submit" name='new' value='Generate New Route'>
      </form>
    </div>
  </div>
{% endblock %}